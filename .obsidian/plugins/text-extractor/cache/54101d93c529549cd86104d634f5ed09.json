{"path":".obsidian/plugins/text-extractor/cache/54101d93c529549cd86104d634f5ed09.json","text":"CPSC 317 Computer Networking Network Layer IP Address and Forwarding Maryam R.Aliabadi mraiyata@cs.ubc.ca 1CPSC 317 – Computer Networking : IP Address & Forwarding Maryam R.Aliabadi Learning Objectives IP addresses and forwarding • Explain why the network layer functions are divided into forwarding and routing • Know the format of an IPv4 address and what it names • Know the difference between classful and classless addressing (CIDR addressing) • Understand how and why IPv6 is different from IPv4 • Describe the general information contained in network packet headers and the role of this information • Describe IP protocol header and the purpose of the fields 2CPSC 317 – Computer Networking : IP Address & Forwarding Maryam R.Aliabadi Reading • Reading: 4.3, 4.3.1, 4.3.3 (Before Obtaining a Host Address: The Dynamic Host Configuration Protocol), 4.3.5 3CPSC 317 – Computer Networking : IP Address & Forwarding Maryam R.Aliabadi IP Service Model • Best effort delivery from one network interface to another network interface • No guarantees • No (per flow) state in the routers • Split into two parts • Forwarding • Routing 4CPSC 317 – Computer Networking : IP Address & Forwarding Maryam R.Aliabadi Two key network-layer functions 5 • forwarding: move packets from router’s input to appropriate router output • routing: determine route taken by packets from source to destination • routing algorithms • forwarding: getting through a single intersection • routing: planning the trip from source to destination A Road-trip AnalogyFunctionality CPSC 317 – Computer Networking : IP Address & Forwarding Maryam R.Aliabadi Network Layer Components 6 Data plane • local, per-router function • determines how datagram arriving on router input port is forwarded to router output port • forwarding function Control plane • network-wide logic • determines how datagram is routed among routers along end-end path from source host to destination host • two control-plane approaches: • traditional routing algorithms: implemented in routers • software-defined networking (SDN): implemented in (remote) servers 1 2 3 0111 values in arriving packet header CPSC 317 – Computer Networking : IP Address & Forwarding Maryam R.Aliabadi Hopping Across the Network 7 23.96.1.1 A router makes forwarding decisions by comparing the addresses of networks in its forwarding table to the destination IP address in the IP header. 192.168.0.1 Destination 23.96.1.28 Source 192.168.0.45 192.168.0.45 → 23.96.1.28 Network Header Network Payload CPSC 317 – Computer Networking : IP Address & Forwarding Maryam R.Aliabadi IPv4 Datagram Header 8 ▪ ver: IP version ▪ Internet Header Length (IHL): # of 32-bit words. ▪ Header size: 20 bytes plus options (IHL: ≥ 5) ▪ Length: total length of the IP datagram including header and payload ▪ TTL (time-to-live): used to discard packets that live too long in the network ▪ protocol: upper-layer protocol to deliver to Words: 32 bits Byte: 8 bits (a.k.a. octet) Nibble: 4 bits ver length 32 bits data (up to 216 bytes) 16-bit identifier Internet checksum time to live 32 bit source IP address IHL type of service flgs fragment offset proto- col 32 bit destination IP address Options (if any) 44 8 16 CPSC 317 – Computer Networking : IP Address & Forwarding Maryam R.Aliabadi IPv6 Datagram Header 9 ver Flow label 32 bits data (up to 216 bytes) Payload length 128 bit source IP address Traffic class Next hdr Hop limit 128 bit destination IP address 84 20 Flow label: identification of related packets Traffic class: similar to IPv4 type of service Next hdr: similar to IPv4 protocol field (upper layer protocol) Header size: 40 bytes CPSC 317 – Computer Networking : IP Address & Forwarding Maryam R.Aliabadi IP Addresses • IPV4 original addresses (obsolete) • IPV4 class-based addresses (obsolete) • IPV4 class-less (CIDR) addresses • IPV6 addresses 10CPSC 317 – Computer Networking : IP Address & Forwarding Maryam R.Aliabadi IPv4 Address 11 An octet is RFC-speak for a byte. Anciently some computers had different sized bytes, so octet is more precise. CPSC 317 – Computer Networking : IP Address & Forwarding Maryam R.Aliabadi Remember the history • IP addresses were first used in the 1970s • No one imagined that each person would have multiple IP addresses! • A few organizations, with a few hundred or thousand computers each • 32 bits (4 billion addresses) seemed like a lot 12CPSC 317 – Computer Networking : IP Address & Forwarding Maryam R.Aliabadi Original addressing • 8 bit network number • 24 bit host number within the network • Example: 17.0.0.1 • The first host on the Apple network 13CPSC 317 – Computer Networking : IP Address & Forwarding Maryam R.Aliabadi In All IPv4 Networks • The first and last addresses are never used for an actual host: • Generally the first address (host address == all 0s) is used to represent the network and for hosts that don’t have an address yet • The last address in range (host address == all 1s) is used for broadcast (sending a datagram to all the hosts in the network) 14CPSC 317 – Computer Networking : IP Address & Forwarding Maryam R.Aliabadi Oops, we underestimated the number of networks we are going to need • So, let’s complicate the scheme • There are a bunch of the network numbers that we haven’t given out yet 15CPSC 317 – Computer Networking : IP Address & Forwarding Maryam R.Aliabadi Class Based Addressing 16 Prefix Network Size (bits) Name 0 8 Class A 10 (128 – 191) 16 Class B 110 (192 – 223) 24 Class C 1110 (224 – 239) 32 Class D - multicast 1111 (240 – 255) 32 Class E (reserved) hostnetwork 192.168.10 52 192 = 0b11000000What class is 192.168.10.52? CPSC 317 – Computer Networking : IP Address & Forwarding Maryam R.Aliabadi Clicker Question Insert the following attendance code in the poll: 17 Section 2: https://join.iclicker.com/WJGW Section 1: https://join.iclicker.com/LDAS SAADI CPSC 317 – Computer Networking : IP Address & Forwarding Maryam R.Aliabadi Clicker Question How many Class B networks are there? A. 28 B. 216 C. 214 D. 210 E. 212 18 Prefix Network Size (bits) Name 10 16 Class B CPSC 317 – Computer Networking : IP Address & Forwarding Maryam R.Aliabadi Answer • Class B addresses allow 16 bits for the network part • That would give 216 networks • Except • Class B addresses have to start with 10 (binary) • 128.0 is the lowest one (10000000 00000000) • 191.255 is the highest one (10111111 11111111) • So, we get 64 * 256 = 16384 networks (=214) 19CPSC 317 – Computer Networking : IP Address & Forwarding Maryam R.Aliabadi Class A Reserved addresses 20 Network Purpose 0 Local identification 10 Private networks 127 Local host (loopback) CPSC 317 – Computer Networking : IP Address & Forwarding Maryam R.Aliabadi Class A Allocations 21 Network Purpose 12 AT&T 17 Apple 19 Ford 38 PSINet (now Cogent) 48 Prudential 56 US Post Office 73 Comcast 6, 7, 11, 21, 22, 26, 28, 29, 30, 33, 55 US Military CPSC 317 – Computer Networking : IP Address & Forwarding Maryam R.Aliabadi Oops, we underestimated the number of networks we are going to need • So, let’s complicate the scheme (again) 22CPSC 317 – Computer Networking : IP Address & Forwarding Maryam R.Aliabadi Classless Inter-Domain Routing Addresses (CIDR) (pronounced cider) • How can we represent a larger number of networks with a wider range of sizes? • Allow any number of bits in the network number (practically, between 8 and 31) • Call these the fixed bits • The rest of the bits name the host within the network • The boundary position is indicated after a / (the number of fixed bits) 23CPSC 317 – Computer Networking : IP Address & Forwarding Maryam R.Aliabadi IP Addressing: CIDR example CIDR Address: 200.23.18.4/22 200 23 18 4 11001000 00010111 00010010 00000100 11001000 00010111 000100 1000000100 24 Network address (22 bits) Host address (10 bits) CPSC 317 – Computer Networking : IP Address & Forwarding Maryam R.Aliabadi Alternative Format: NETMASK CIDR Address: 200.23.18.4/22 200 23 18 4 11001000 00010111 00010010 00000100 11001000 00010111 000100 10 00000100 11111111 11111111 11111100 00000000 255 255 252 0 200.23.18.4/255.255.252.0 or 200.23.18.4 netmask: 255.255.252.0 25 Network address Host address CPSC 317 – Computer Networking : IP Address & Forwarding Maryam R.Aliabadi IP Network Address Replace the host bits with zero (don’t cares) Routers only care about the network part 26 11001000 00010111 000100 10 00000100 network part host part Example: What is the network address of the host 200.23.18.4/22? or 200.23.16/22200.23.16.0/22 11001000 00010111 000100 00 00000000 CPSC 317 – Computer Networking : IP Address & Forwarding Maryam R.Aliabadi IP Network Address (NETMASK) Replace the host bits with zero (don’t cares) You can compute this by AND-ing with the netmask 27 11001000 00010111 000100 10 00000100 network part host part Example: What is the network address of the host 200.23.18.4 netmask 255.255.252.0? or 200.23.16/22200.23.16.0/22 11001000 00010111 000100 00 00000000 11111111 11111111 111111 00 00000000 netmask CPSC 317 – Computer Networking : IP Address & Forwarding Maryam R.Aliabadi Network Size How many hosts can exist on this network?: host number (smallest) 200.23.16.0 host number (largest) 200.23.19.255 But avoid host numbers of all zeros and all ones: 200.23.16.1 to 200.23.19.254, or 210 – 2 = 1024 - 2 = 1022 28 Note: All ones and all zeros avoided (all zeros is the IP address machines use when they haven’t been assigned an address, and broadcast uses all ones). Special exemption for /31 addresses, you can use both of the addresses for hosts 11001000 00010111 00010000 00000000 network part host part 200.23.16.0/22 CPSC 317 – Computer Networking : IP Address & Forwarding Maryam R.Aliabadi How many networks are there? 29 /30 network /24 network /24 network /24 network /31 network /31 network CPSC 317 – Computer Networking : IP Address & Forwarding Maryam R.Aliabadi Oops, we underestimated the number of networks we are going to need (and the number of hosts, too) • So, let’s start over 30CPSC 317 – Computer Networking : IP Address & Forwarding Maryam R.Aliabadi IPv6 format • 128 bits, 32 Hex-digits (8 hextets) separated by colons • Zero suppression • Separated into network+subnet (48+16), host (64) 31 Zero compression and suppressing leading zeros CPSC 317 – Computer Networking : IP Address & Forwarding Maryam R.Aliabadi But for now, we use CIDR addresses • For the rest of this module, we’ll concentrate on IPv4 and CIDR • They are the dominant addressing form in use now 32CPSC 317 – Computer Networking : IP Address & Forwarding Maryam R.Aliabadi Getting familiar with CIDR addresses • Questions we need to be able to answer • How big can a network be? • Is a given address on a given network? • Which of many networks is a given address on? • Are two addresses on the same network? 33CPSC 317 – Computer Networking : IP Address & Forwarding Maryam R.Aliabadi Clicker Question Network A has address 200.0.0.0/17 Network B has address 201.0.0.0/18 Choose the true statement (or the one that is closest to being true) A. Network A has one more host address than network B B. Network A has twice as many host addresses as network B C. Network B has one more host address than network A D. Network B has twice as many host addresses as network A 34CPSC 317 – Computer Networking : IP Address & Forwarding Maryam R.Aliabadi Answer • /17 means 17 bits for the network address • Leaving 15 (32 – 17) bits for the host address • 215 = 32768 hosts – 2 = 32766 • /18 means 18 bits for the network address • Leaving 14 (32 – 18) bits for the host address • 214 = 16384 hosts – 2 = 16382 • Network A (/17) has (just about) twice as many host addresses as Network B (/18) 35CPSC 317 – Computer Networking : IP Address & Forwarding Maryam R.Aliabadi Clicker Question What is the NETMASK for a CIDR block that ends with /8? i.e., 17.0.0.0/8 A. 255.255.255.0 B. 255.255.0.0 C. 255.0.0.0 D. Something else E. There is insufficient information to determine 36CPSC 317 – Computer Networking : IP Address & Forwarding Maryam R.Aliabadi Answer /8 means 8 bits for the network address netmask is 11111111 00000000 00000000 00000000 255.0.0.0 37CPSC 317 – Computer Networking : IP Address & Forwarding Maryam R.Aliabadi Clicker Question What is the NETMASK for a CIDR block that ends with /30? A. 255.255.255.192 B. 255.255.255.240 C. 255.255.255.248 D. 255.255.255.252 E. 255.255.255.254 38 Binary Decimal ------------------- 00000000 == 0 10000000 == 128 11000000 == 192 11100000 == 224 11110000 == 240 11111000 == 248 11111100 == 252 11111110 == 254 11111111 == 255CPSC 317 – Computer Networking : IP Address & Forwarding Maryam R.Aliabadi Answer /30 means 30 bits for the network address netmask is 11111111 11111111 11111111 11111100 255.255.255.252 39 Binary Decimal ------------------- 00000000 == 0 10000000 == 128 11000000 == 192 11100000 == 224 11110000 == 240 11111000 == 248 11111100 == 252 11111110 == 254 11111111 == 255 CPSC 317 – Computer Networking : IP Address & Forwarding Maryam R.Aliabadi Clicker Question How many different host addresses are there in the CIDR range for 204.33.109.0/29? (provide your answer as a number) 40CPSC 317 – Computer Networking : IP Address & Forwarding Maryam R.Aliabadi Answer /29 means 29 bits for the network address Leaving 3 (32 – 29) bits for the host address 23 – 2 = 8 – 2 = 6 host addresses 41CPSC 317 – Computer Networking : IP Address & Forwarding Maryam R.Aliabadi In class activity • ICA52 42CPSC 317 – Computer Networking : IP Address & Forwarding Maryam R.Aliabadi Next Topic: IP Address Ranges 43","libVersion":"0.2.1","langs":""}