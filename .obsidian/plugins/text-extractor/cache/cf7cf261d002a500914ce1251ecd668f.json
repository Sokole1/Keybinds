{"path":".obsidian/plugins/text-extractor/cache/cf7cf261d002a500914ce1251ecd668f.json","text":"CPSC 317 Computer Networking Transport Layer Windowing Protocols Maryam R.Aliabadi mraiyata@cs.ubc.ca 1CPSC 317 ‚Äì Computer Networking : Transport Layer ‚Äì Windowing Protocols Maryam R.Aliabadi READING ‚Ä¢ Reading: 3.4.2, 3.4.3, 3.4.4 3CPSC 317 ‚Äì Computer Networking : Transport Layer ‚Äì Windowing Protocols Maryam R.Aliabadi Learning goals Sliding Window Protocols ‚Ä¢ Determine an appropriate window size ‚Ä¢ Trace the execution of Go-Back-N (GBN) ‚Ä¢ Trace the execution of Selective-Repeat (SR) ‚Ä¢ Analyze GBN and SR under segment loss ‚Ä¢ Trace the execution of GBN and SR when the range of sequence numbers is restricted ‚Ä¢ Given a range of sequence numbers determine if a set of sender and receiver window sizes is legal 4CPSC 317 ‚Äì Computer Networking : Transport Layer ‚Äì Windowing Protocols Maryam R.Aliabadi Alternating Bit Protocol In Practice ‚Ä¢ Assume a connection from Vancouver to Montreal ‚Ä¢ Two-way propagation delay is 30 ms ‚Ä¢ Link speed (bandwidth) is 1Gbps ‚Ä¢ Segment size is 1000 bytes, including overhead ‚Ä¢ How much of the link bandwidth are we actually using? ‚Ä¢ Transmission delay, one segment: 8000 109 = 0.008 ùëöùë† ‚Ä¢ Throughput: 8000 30+0.008 = 0.267 ùëÄùëèùëùùë† ‚Ä¢ Link bandwidth utilization: 0.267 1000 = 0.00027 (or 0.027%) 5CPSC 317 ‚Äì Computer Networking : Transport Layer ‚Äì Windowing Protocols Maryam R.Aliabadi Sending multiple segments ‚Ä¢ Sender can send multiple segments ‚Ä¢ Don‚Äôt wait for each acknowledgement 6CPSC 317 ‚Äì Computer Networking : Transport Layer ‚Äì Windowing Protocols Maryam R.Aliabadi Clicker question ‚Ä¢ Assume a connection from Vancouver to Montreal ‚Ä¢ Two-way propagation delay is 30 ms ‚Ä¢ Link speed (bandwidth) is 1Gbps ‚Ä¢ Segment size is 1000 bytes, including overhead ‚Ä¢ How many segments do I need to have going at once to get the utilization up to 1%? I want an integer! 7CPSC 317 ‚Äì Computer Networking : Transport Layer ‚Äì Windowing Protocols Maryam R.Aliabadi Clicker answer ‚Ä¢ Assume a connection from Vancouver to Montreal ‚Ä¢ Round Trip Time is 30 ms ‚Ä¢ Link speed (bandwidth) is 1Gbps ‚Ä¢ Segment size is 1000 bytes, including overhead ‚Ä¢ How many segments do I need to have going at once to get the utilization up to 1%? I want an integer! ‚Ä¢ Suppose n segments required in transit to achieve throughput = 1% of 1Gbps (= 10Mbps) ‚Ä¢ Total delay for transmitting n segments in one round trip: (30 + n*0.008)/1000 s ‚Ä¢ Total throughput: n*1000*8 / ((30+n*0.008)/1000) bits/s >= 10^7 ‚Ä¢ 8n/(30 + 0.008n) >= 10 ‚áí 8n >= 300 + 0.08n ‚áí n >= 37.88 ‚áí n >= 38 8CPSC 317 ‚Äì Computer Networking : Transport Layer ‚Äì Windowing Protocols Maryam R.Aliabadi Clicker answer ‚Ä¢ Assume a connection from Vancouver to Montreal ‚Ä¢ Two-way propagation delay is 30 ms ‚Ä¢ Link speed (bandwidth) is 1Gbps ‚Ä¢ Segment size is 1000 bytes, including overhead ‚Ä¢ How many segments do I need to have going at once to get the utilization up to 1%? I want an integer! 9 Utilization1= throughput1/bandwidth , Utilization2= throughput2/bandwidth Utilzation1/Utilization2= throughput1/throughput2 Utilzation1/Utilization2= (data1/RTT)/(data2/RTT)= data1/data2 0.027%/ 1% = data1 / n*data1. => n~38 CPSC 317 ‚Äì Computer Networking : Transport Layer ‚Äì Windowing Protocols Maryam R.Aliabadi Why no finite state machine? ‚Ä¢ When we allow multiple segments in flight, modelling this with a finite state machine is less than ideal ‚Ä¢ Why? 10CPSC 317 ‚Äì Computer Networking : Transport Layer ‚Äì Windowing Protocols Maryam R.Aliabadi Windowing Protocols: The basic idea ‚Ä¢ Sender sends a bunch of segments before waiting for an ACK ‚Ä¢ How many? ‚Ä¢ Expand sequence numbers to integers to account for multiple in- transit and unacknowledged packets ‚Ä¢ Any or all of these segments might get lost ‚Ä¢ Sender has to be ready to re-send any segments that get lost ‚Ä¢ Buffer in-transit segments until acknowledged ‚Ä¢ Receiver has to be ready to handle segments arriving out of order ‚Ä¢ Buffer segments received out of order under ‚Äúgaps‚Äù filled 11CPSC 317 ‚Äì Computer Networking : Transport Layer ‚Äì Windowing Protocols Maryam R.Aliabadi Sender‚Äôs Window ‚Ä¢ Sender‚Äôs window: range of segments that are stored for potential re- send ‚Ä¢ Usually considered to be fixed size ‚Ä¢ Window only moves when the first segment in the window is acknowledged ‚Ä¢ What if other ACKs are received? ‚Ä¢ New segments are sent only when they ‚Äúfit‚Äù in the window 12CPSC 317 ‚Äì Computer Networking : Transport Layer ‚Äì Windowing Protocols Maryam R.Aliabadi Receiver‚Äôs Window ‚Ä¢ Receiver‚Äôs window: store segments received out of order ‚Ä¢ (Out of order because of drops or re-ordering in the network) ‚Ä¢ If window is 1 segment: out of order segments are dropped ‚Ä¢ Once missing segments arrive, window is processed ‚Ä¢ Segments received beyond the window limit will be discarded 13CPSC 317 ‚Äì Computer Networking : Transport Layer ‚Äì Windowing Protocols Maryam R.Aliabadi In a perfect world ‚Ä¶ ‚Ä¢ Assume: ‚Ä¢ It takes 1 time unit for the sender to transmit each segment ‚Ä¢ It takes 2 time units for a bit to get from the sender to the receiver or from the receiver to the sender ‚Ä¢ No segments are ever lost or delayed ‚Ä¢ How large of a sender window do we need to enable the sender to keep sending all the time? 14CPSC 317 ‚Äì Computer Networking : Transport Layer ‚Äì Windowing Protocols Maryam R.Aliabadi Clicker question ‚Ä¢ Assume: ‚Ä¢ It takes 1 time unit for the sender to transmit each segment ‚Ä¢ It takes 2 time units for a bit to get from the sender to the receiver or from the receiver to the sender ‚Ä¢ No segments are ever lost or delayed ‚Ä¢ How large of a sender window do we need to enable the sender to keep sending all the time? 15CPSC 317 ‚Äì Computer Networking : Transport Layer ‚Äì Windowing Protocols Maryam R.Aliabadi Clicker answer 16 Sender Receiver 0 1 2 3 4 5 6 7 8 0 1 2 3 4 5 6 7 8 CPSC 317 ‚Äì Computer Networking : Transport Layer ‚Äì Windowing Protocols Maryam R.Aliabadi Problems to Consider ‚Ä¢ Sender ‚Ä¢ How does the sender know that data got lost? ‚Ä¢ Can lost data be distinguished from a lost ACK? ‚Ä¢ If we send more than one segment, how many segments can we remember? ‚Ä¢ Receiver ‚Ä¢ How can you tell if data is out-of-order or missing? ‚Ä¢ What should be ACKed? 17CPSC 317 ‚Äì Computer Networking : Transport Layer ‚Äì Windowing Protocols Maryam R.Aliabadi Go-Back-N Strategy Receiver: ‚Ä¢ Window of size 1 ‚Ä¢ When a segment is received, send an ACK for the last segment that was received in order ‚Ä¢ Deliver the arriving segment if received in order, otherwise discard the segment Sender: ‚Ä¢ Sender‚Äôs window determines the number of outstanding (unacknowledged) segments held in memory ‚Ä¢ Start timer on first segment sent ‚Ä¢ Received ACKs may be cumulative (re-start timer on receipt) ‚Ä¢ On timeout go to last unACK‚Äôed segment and re-send everything (re-start timer) 18CPSC 317 ‚Äì Computer Networking : Transport Layer ‚Äì Windowing Protocols Maryam R.Aliabadi How GBN Works? 19 0 1 2 3 4 5 6 7 8 9 10 11 Sender Receiver Sliding window N=4 CPSC 317 ‚Äì Computer Networking : Transport Layer ‚Äì Windowing Protocols Maryam R.Aliabadi How GBN Works? 0 1 2 3 4 5 6 7 8 9 10 11 20 Sender Receiver Sliding window N=4 0 1 2 3 CPSC 317 ‚Äì Computer Networking : Transport Layer ‚Äì Windowing Protocols Maryam R.Aliabadi How GBN Works? 0 1 2 3 4 5 6 7 8 9 10 11 21 Sender Receiver Sliding window N=4 0 1 2 3 4 0 CPSC 317 ‚Äì Computer Networking : Transport Layer ‚Äì Windowing Protocols Maryam R.Aliabadi How GBN Works? 0 1 2 3 4 5 6 7 8 9 10 11 22 Sender Receiver Sliding window N=4 0 1 2 3 4 5 0 1 CPSC 317 ‚Äì Computer Networking : Transport Layer ‚Äì Windowing Protocols Maryam R.Aliabadi How GBN Works? 0 1 2 3 4 5 6 7 8 9 10 11 23 Sender Receiver Sliding window N=4 0 1 2 3 4 5 0 1 2 CPSC 317 ‚Äì Computer Networking : Transport Layer ‚Äì Windowing Protocols Maryam R.Aliabadi How GBN Works? 0 1 2 3 4 5 6 7 8 9 10 11 24 Sender Receiver Sliding window N=4 0 1 2 3 4 5 2 3 4 5 0 1 2 CPSC 317 ‚Äì Computer Networking : Transport Layer ‚Äì Windowing Protocols Maryam R.Aliabadi How GBN Works? 0 1 2 3 4 5 6 7 8 9 10 11 25 Sender Receiver Sliding window N=4 0 1 2 3 4 5 0 1 2 3 CPSC 317 ‚Äì Computer Networking : Transport Layer ‚Äì Windowing Protocols Maryam R.Aliabadi Go-Back-N Demo https://media.pearsoncmg.com/aw/ecs_kurose_compnetwork_7/cw/content/inter activeanimations/go-back-n-protocol/index.html 26CPSC 317 ‚Äì Computer Networking : Transport Layer ‚Äì Windowing Protocols Maryam R.Aliabadi Sequence Number Range ‚Ä¢ The range of possible sequence numbers is limited by n, the number of bits used to represent them ‚Ä¢ Example: 3 bits gets numbers 0-7, 8 bits gets numbers 0-255 ‚Ä¢ Sequence number arithmetic is modulo 2n (e.g., with n = 3 bits, the range is 0-7, so after 7 comes 0) ‚Ä¢ What is the maximum sender window size for the range 0-255? ‚Ä¢ Maybe easier to compute: what about range 0-3? ‚Ä¢ Can the receiver distinguish a new 0 from a resent old 0? 27CPSC 317 ‚Äì Computer Networking : Transport Layer ‚Äì Windowing Protocols Maryam R.Aliabadi Sequence number Range ‚Ä¢ Assume that segments can‚Äôt be re-ordered in the network ‚Ä¢ Rule: sender‚Äôs window size + receiver‚Äôs window size <= sequence number range ‚Ä¢ For a range with ùëõ numbers (0 to ùëõ ‚àí 1): ‚Ä¢ Go-Back-N: ‚Ä¢ receiver‚Äôs window size is 1 ‚Ä¢ sender‚Äôs maximum window size is ùëõ ‚àí 1 ‚Ä¢ Why? 28CPSC 317 ‚Äì Computer Networking : Transport Layer ‚Äì Windowing Protocols Maryam R.Aliabadi In-class activity ‚Ä¢ ICA44 29CPSC 317 ‚Äì Computer Networking : Transport Layer ‚Äì Windowing Protocols Maryam R.Aliabadi Next Topic Selective Repeat 30","libVersion":"0.2.1","langs":""}