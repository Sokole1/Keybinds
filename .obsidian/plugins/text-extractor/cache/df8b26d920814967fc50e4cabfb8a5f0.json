{"path":".obsidian/plugins/text-extractor/cache/df8b26d920814967fc50e4cabfb8a5f0.json","text":"CPSC 317 Computer Networking Application Layer The Web Maryam R.Aliabadi mraiyata@cs.ubc.ca 1CPSC 317 – Computer Networking : Application Layer – The Web Maryam R.Aliabadi READING • Reading: 2.2 2CPSC 317 – Computer Networking : Application Layer – The Web Maryam R.Aliabadi Learning goals - http • Describe the web application and the structure of web objects • Describe the HTTP protocol and format of request/response messages • Identify common HTTP methods and response codes • Describe the benefits and basic functionality of HTTP non-persistent connections, persistent connections, and HTTP pipelining • Explain what HTTP cookies are and what they can be used for • Describe how Web caches can be used to reduce HTTP data transfer 3CPSC 317 – Computer Networking : Application Layer – The Web Maryam R.Aliabadi APPLICATION: The World Wide Web • One of the first Internet applications that became popular • Information available on the web in the form of a “web page” • A web page consists of objects • A base HTML file refers to other referenced objects • HTML files, Images, scripts, stylesheets, frames, audio files,.. • Each object (including base html file) is addressable by a URL • Example: www.students.cs.ubc.ca/~cs-317/2024W/web/index.html 4 Host name Path name CPSC 317 – Computer Networking : Application Layer – The Web Maryam R.Aliabadi Hypertext Transfer Protocol (HTTP) • HTTP is the Web’s main application layer protocol • Client/server model • Client: browser that requests, receives, displays Web objects • Server: sends objects in response to requests • uses TCP, typically port 80 (443 for HTTPS) • For each Web object (URL) • Client sends one request message at once • Server sends full response message at once • Stateless: server maintains no information about past requests 5CPSC 317 – Computer Networking : Application Layer – The Web Maryam R.Aliabadi HTTP Message Format There are two types of messages: • HTTP request message • ASCII (Human Readable format) • HTTP response message 7CPSC 317 – Computer Networking : Application Layer – The Web Maryam R.Aliabadi HTTP Message Format - 2 8CPSC 317 – Computer Networking : Application Layer – The Web Maryam R.Aliabadi HTTP Message Format - 3 9CPSC 317 – Computer Networking : Application Layer – The Web Maryam R.Aliabadi HTTP Message Format - 4 10CPSC 317 – Computer Networking : Application Layer – The Web Maryam R.Aliabadi HTTP Message Format - 5 11CPSC 317 – Computer Networking : Application Layer – The Web Maryam R.Aliabadi HTTP Message Example 12 Connection: keep-alive CPSC 317 – Computer Networking : Application Layer – The Web Maryam R.Aliabadi Request Methods • GET method: • Relevant data is in URL • Form data, if needed, found in URL itself • Often used in forms that search for data (though this varies) • POST method: • Includes form input in message body • Often used in forms that submit new data • HEAD method: • Similar to GET, but returns only header • Used to check if existing content was modified 13 POST /login HTTP/1.1 GET /index.html HTTP/1.1 HEAD /index.html HTTP/1.1 CPSC 317 – Computer Networking : Application Layer – The Web Maryam R.Aliabadi HTTP Response Status Codes • 2xx: success • Example: 200 OK • 3xx: additional action required • Example: 301 Moved (redirection), 304 Not Modified (use cache) • 4xx: client problem • Example: 400 Bad Request, 404 Not Found • 5xx: server problem • Example: 500 Bad Gateway, 505 HTTP Version not supported 14CPSC 317 – Computer Networking : Application Layer – The Web Maryam R.Aliabadi HTTP Message Example Request: GET /index.html HTTP/1.1 Host: www.example.com User-Agent: Firefox/3.6.10 … Connection: keep-alive Response: HTTP/1.1 200 OK Date: Sun, 13 Nov 2017 20:09:20 GMT Content-Length: 2652 … Content-Type: text/html <HTML>… 15CPSC 317 – Computer Networking : Application Layer – The Web Maryam R.Aliabadi HTTP Connection • There are three types of HTTP connections: • Non-persistent HTTP • Persistent HTTP • Pipelining 16CPSC 317 – Computer Networking : Application Layer – The Web Maryam R.Aliabadi HTTP Connections (I) • Non-persistent HTTP (version 1.0) • At most one object is sent over each TCP connection (one request, one response) • Connection is closed as soon as data is transferred • Web page with multiple objects requires multiple connections 17CPSC 317 – Computer Networking : Application Layer – The Web Maryam R.Aliabadi Request / response diagram 18 RTT TCP Connection Request TCP Connection Response HTTP Request HTTP Response Client Server RTT Thickness of line indicates how long it takes to transmit the message CPSC 317 – Computer Networking : Application Layer – The Web Maryam R.Aliabadi Non-persistent HTTP Response Time • One RTT to initiate TCP connection • One RTT for http request and first few bytes of http response to return. • Object/File transmission time 19 Non-persistent HTTP Response Time = 2RTT + File transmission time CPSC 317 – Computer Networking : Application Layer – The Web Maryam R.Aliabadi Clicker question Suppose the web page we are interested in refers to another “object” that we need to fetch as well. How many round trips will it take to retrieve the web page and this additional object? A. 1 B. 2 C. 3 D. 4 20CPSC 317 – Computer Networking : Application Layer – The Web Maryam R.Aliabadi Requesting multiple objects 22 TCP RTT Base RTT TCP RTT Obj RTT TCP RTT Obj RTTCompleted Client Server CPSC 317 – Computer Networking : Application Layer – The Web Maryam R.Aliabadi Response Time Consideration • Imagine a Web page with a main html page and 10 images • Non-persistent connection: • For each object: • One RTT to initiate connection • One RTT (plus transmission) to request each object • 2 RTTs per object: 22 RTTs to retrieve page (plus transmission) • Can be improved if several connections are opened in parallel 23CPSC 317 – Computer Networking : Application Layer – The Web Maryam R.Aliabadi HTTP Connections (II) • Persistent HTTP (version 1.1) • Multiple requests can be sent over single connection • Responses are received in the same order as the requests 24CPSC 317 – Computer Networking : Application Layer – The Web Maryam R.Aliabadi Request / response diagram CPSC 317 2023W2 © 2021 TCP RTT Base RTT Obj RTT Obj RTT Completed Client Server CPSC 317 – Computer Networking : Application Layer – The Web Maryam R.Aliabadi Response Time Consideration (again) • Imagine a Web page with a main html page and 10 images • Persistent connection: • RTT to initiate connection only once (assuming all objects in same server) • One RTT (plus transmission) to request each object • 1 RTT for connection plus 1 RTT per object: 12 RTTs total (plus transmission) 26CPSC 317 – Computer Networking : Application Layer – The Web Maryam R.Aliabadi HTTP Connections (III) • Pipelining: • Assumes persistent HTTP (version 1.1) • Client may send several requests without waiting for response • Responses are received in the same order as the requests 27CPSC 317 – Computer Networking : Application Layer – The Web Maryam R.Aliabadi HTTP connections - pipelining 28 TCP RTT Base RTT Objects RTT Completed Client Server CPSC 317 – Computer Networking : Application Layer – The Web Maryam R.Aliabadi Response Time Consideration (again) • Imagine a Web page with a main html page and 10 images • Persistent connection with pipelining: • 1 RTT for connection • 1 RTT for first request • 1 RTT for all the images (plus transmission) • Works well only when all requests to same server 29CPSC 317 – Computer Networking : Application Layer – The Web Maryam R.Aliabadi Cookies: per-user State • Web sites may use cookies to maintain state • “Remember me” authentication • Session state • Shopping carts, recommendations • Process: • Response includes Set-Cookie header • Browser saves cookie associated with the server • Next request to the same server includes Cookie header with the same value 30CPSC 317 – Computer Networking : Application Layer – The Web Maryam R.Aliabadi Maintaining user/server states-Example 31CPSC 317 – Computer Networking : Application Layer – The Web Maryam R.Aliabadi Cookies: Benefits and Risks • Benefits: • Authentication • Shopping cards • Recommendations • User session state (web email) • Risks • User Privacy • Information security 32CPSC 317 – Computer Networking : Application Layer – The Web Maryam R.Aliabadi Web Cache • Goal: satisfy client requests without involving origin server • Role: A proxy between client and server 34CPSC 317 – Computer Networking : Application Layer – The Web Maryam R.Aliabadi Web Cache • Browser may maintain a cached version of page • Reduces network utilization • Reduces page load time • Cache may also be maintained in a separate host (proxy) • Browser sends request to proxy, which redirects to server • If proxy has page cached, return immediately • Typically closer to user than the server (company, ISP) • Web servers can provide cache policy, like: • How long a page should be cached for • If cache is private (specific to user) or shared • Conditional GET: request page, but only if modified 35CPSC 317 – Computer Networking : Application Layer – The Web Maryam R.Aliabadi Clicker question Suppose a user is accessing a web page from a server where the RTT is 0.2s. If obtaining the web page takes 10 round trips, how much faster would it be to access the web page through a cache whose RTT is 0.01s and caches all of the objects? A. 20 times faster B. 10 times faster C. 4 times faster D. 2 times faster 36CPSC 317 – Computer Networking : Application Layer – The Web Maryam R.Aliabadi Clicker question Suppose a user is accessing a web page from a server where the RTT is 0.2s. If obtaining the web page takes 10 round trips, how much faster would it be to access the web page through a cache whose RTT is 0.01s and caches 80% of the objects? A. 20 times faster B. 10 times faster C. 4 times faster D. 2 times faster 38CPSC 317 – Computer Networking : Application Layer – The Web Maryam R.Aliabadi HTTP 1.1 With Pipelining and Web Cache 40 2*R2 + R1 R1 tcp base http tcp base http objs uncached objs R2 + R1 R2R1 CPSC 317 – Computer Networking : Application Layer – The Web Maryam R.Aliabadi Cache Validation Example 1 Request: GET /labs/algorithms/img/faculty/xxx.jpeg HTTP/1.1 Host: www.cs.ubc.ca User-Agent: maryam 41CPSC 317 – Computer Networking : Application Layer – The Web Maryam R.Aliabadi Cache Validation Example 1 Response: HTTP/1.1 200 OK Date: Mon, 22 Jan 2024 12:35:16 GMT Server: Apache/2.4.51 (Linux/SUSE) Last-Modified: Thu, 10 Sep 2020 04:48:40 GMT ETag: \"6fa8-5aeee482e5a00\" Accept-Ranges: bytes Content-Length: 28584 Vary: Accept-Encoding Content-Type: image/jpeg Following this is 28584 bytes of JPEG data 42CPSC 317 – Computer Networking : Application Layer – The Web Maryam R.Aliabadi Cache Validation Example 2 Request: GET /labs/algorithms/img/faculty/xxx.jpeg HTTP/1.1 Host: www.cs.ubc.ca User-Agent: maryam If-Modified-Since: Thu, 10 Sep 2020 04:48:40 GMT 43CPSC 317 – Computer Networking : Application Layer – The Web Maryam R.Aliabadi Cache Validation Example 2 Response: HTTP/1.1 304 Not Modified Date: Mon, 22 Jan 2024 12:45:23 GMT Server: Apache/2.4.51 (Linux/SUSE) ETag: \"6fa8-5aeee482e5a00\" 44CPSC 317 – Computer Networking : Application Layer – The Web Maryam R.Aliabadi In-class activity • ICA32 • Timing of various versions of HTTP • Effectiveness of caching CPSC 317 2023W2 © 2021 45CPSC 317 – Computer Networking : Application Layer – The Web Maryam R.Aliabadi Next Topic: Domain Name System 46","libVersion":"0.2.1","langs":""}