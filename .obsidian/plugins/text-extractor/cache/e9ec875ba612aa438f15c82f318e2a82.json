{"path":".obsidian/plugins/text-extractor/cache/e9ec875ba612aa438f15c82f318e2a82.json","text":"CPSC 317 Computer Networking Network Layer IP Address Ranges Maryam R.Aliabadi mraiyata@cs.ubc.ca 1CPSC 317 – Computer Networking : IP Address Ranges Maryam R.Aliabadi Learning Goals IP addresses and forwarding • Describe the relationship between IP addresses and forwarding in routers • Perform longest prefix matching • Define what is meant by a non-routable IP address and give an example • Explain how an organization gets IP addresses for its use • Understand the concepts of sub-dividing and aggregation of IP address ranges • Given a router, its forwarding tables and an incoming packet, determine the link the packet will go out on • Given a collection of routers, their forwarding tables, and a packet, trace the packet through the network 2CPSC 317 – Computer Networking : IP Address Ranges Maryam R.Aliabadi READING • Reading: 4.3 (up to 4.3.2) 3CPSC 317 – Computer Networking : IP Address Ranges Maryam R.Aliabadi Clicker Question What is the NETMASK for a CIDR block that ends with /8? i.e., 17.0.0.0/8 A. 255.255.255.0 B. 255.255.0.0 C. 255.0.0.0 D. Something else E. There is insufficient information to determine 4CPSC 317 – Computer Networking : IP Address Ranges Maryam R.Aliabadi Answer /8 means 8 bits for the network address netmask is 11111111 00000000 00000000 00000000 255.0.0.0 5CPSC 317 – Computer Networking : IP Address Ranges Maryam R.Aliabadi Clicker Question What is the NETMASK for a CIDR block that ends with /30? A. 255.255.255.192 B. 255.255.255.240 C. 255.255.255.248 D. 255.255.255.252 E. 255.255.255.254 6 Binary Decimal ------------------- 00000000 == 0 10000000 == 128 11000000 == 192 11100000 == 224 11110000 == 240 11111000 == 248 11111100 == 252 11111110 == 254 11111111 == 255CPSC 317 – Computer Networking : IP Address Ranges Maryam R.Aliabadi Answer /30 means 30 bits for the network address netmask is 11111111 11111111 11111111 11111100 255.255.255.252 7 Binary Decimal ------------------- 00000000 == 0 10000000 == 128 11000000 == 192 11100000 == 224 11110000 == 240 11111000 == 248 11111100 == 252 11111110 == 254 11111111 == 255 CPSC 317 – Computer Networking : IP Address Ranges Maryam R.Aliabadi Clicker Question How many different host addresses are there in the CIDR range for 204.33.109.0/29? (provide your answer as a number) 8CPSC 317 – Computer Networking : IP Address Ranges Maryam R.Aliabadi Answer /29 means 29 bits for the network address Leaving 3 (32 – 29) bits for the host address 23 – 2 = 8 – 2 = 6 host addresses 9CPSC 317 – Computer Networking : IP Address Ranges Maryam R.Aliabadi What operations do we need on IPs? • Is an IP address in my network? • If so, I can send a message to it directly without going through a router • If not, I must send the message to the router • Which of many networks is an IP address in? • Forwarding function of a router CPSC 317 2023W2 © 2021 10CPSC 317 – Computer Networking : IP Address Ranges Maryam R.Aliabadi Is an IP in my network? • Assume: • Host has IP 192.168.45.24/255.255.240.0 (or /20) • Destination IP is 192.168.49.104 • Is destination in the same network as host? • If so, we can send a message to it directly (no router) • Write the addresses in binary • Host: 11000000 10101000 00101101 00011000 • Dst : 11000000 10101000 00110001 01101000 CPSC 317 2023W2 © 2021 11 Network part CPSC 317 – Computer Networking : IP Address Ranges Maryam R.Aliabadi Which Networks Match An Address Consider the IP address 198.162.54.12 Which of these networks contain this address? 0.0.0.0/0 198.0.0.0/8 198.162.0.0/16 198.162.54.0/24 198.162.54.0/28 198.162.54.16/28 12CPSC 317 – Computer Networking : IP Address Ranges Maryam R.Aliabadi Which Networks Match An Address Consider the IP address 11000110 10100010 00110110 00001100 198.162.54.12 Which of these networks contain this address? XXXXXXXX XXXXXXXX XXXXXXXX XXXXXXXX 0.0.0.0/0 11000110 XXXXXXXX XXXXXXXX XXXXXXXX 198.0.0.0/8 11000110 10100010 XXXXXXXX XXXXXXXX 198.162.0.0/16 11000110 10100010 00110110 XXXXXXXX 198.162.54.0/24 11000110 10100010 00110110 0000XXXX 198.162.54.0/28 11000110 10100010 00110110 0001XXXX 198.162.54.16/28 13CPSC 317 – Computer Networking : IP Address Ranges Maryam R.Aliabadi Forwarding Table • Each router keeps a forwarding table indicating, for each destination IP range, the link to be used • Formally, the Forwarding Information Base (FIB) • Built from aggregating information retrieved from other routers (routing table, or RIB) 14CPSC 317 – Computer Networking : IP Address Ranges Maryam R.Aliabadi Longest Prefix Matching • If more than one range in the table matches an IP address, the most specific entry is used • Since ranges are prefixes, the longest prefix is the most specific • Hence, longest prefix match • Example: 192.168.35.0/24 is more specific than 192.168.0.0/16 and both match 192.168.35.101 15CPSC 317 – Computer Networking : IP Address Ranges Maryam R.Aliabadi Clicker Question Insert the following attendance code in the poll: 16 Section 2: https://join.iclicker.com/WJGW Section 1: https://join.iclicker.com/LDAS HAAFEZ CPSC 317 – Computer Networking : IP Address Ranges Maryam R.Aliabadi Clicker Question A router has the following prefixes in its forwarding table. Which entry is used to route to address 198.162.51.175? (Hint: when /8, /16, or /24 you can do the matching in hex) A. 0.0.0.0/0 B. 198.0.0.0/8 C. 198.162.0.0/16 D. 198.162.54.0/24 E. More than one of the ranges above 17CPSC 317 – Computer Networking : IP Address Ranges Maryam R.Aliabadi Clicker answer Remember longest prefix match Address: 198.162.51.175 A. 0.0.0.0/0 B. 198.0.0.0/8 C. 198.162.0.0/16 D. 198.162.54.0/24 E. More than one of the ranges above 18 <<< longest match CPSC 317 – Computer Networking : IP Address Ranges Maryam R.Aliabadi Clicker Question A router has the following prefixes in its forwarding table. Which entry is used to route to address 205.96.3.1? A. 0.0.0.0/0 B. 198.0.0.0/8 C. 198.162.0.0/16 D. More than one of the ranges above E. None of the above 19CPSC 317 – Computer Networking : IP Address Ranges Maryam R.Aliabadi Clicker answer Remember longest prefix match Address: 205.96.3.1 A. 0.0.0.0/0 B. 198.0.0.0/8 C. 198.162.0.0/16 D. More than one of the ranges above E. None of the above 20 <<< longest match CPSC 317 – Computer Networking : IP Address Ranges Maryam R.Aliabadi Non-Routable IP Addresses • Some addresses are defined to be non-routable • If a router sees a datagram with a non-routable destination address, it just throws it away • RFC 1918 defines these three CIDR networks as non-routable: • 10.0.0.0/8 • 172.16.0.0/12 • 192.168.0.0/16 21CPSC 317 – Computer Networking : IP Address Ranges Maryam R.Aliabadi IP Address Assignment IP address ranges are assigned to ISPs through a complicated process • Through IANA (Internet Assigned Numbers Authority) • Through the RIP (Regional Internet Registries) • Then to various ISPs (Internet Service Providers) • Who assign sub-portions to their customer ISPs • And so forth 22CPSC 317 – Computer Networking : IP Address Ranges Maryam R.Aliabadi Regional Internet Registries 23 From http://commons.wikimedia.org/wiki/File:Regional_Internet_Registries_world_map.svg CPSC 317 – Computer Networking : IP Address Ranges Maryam R.Aliabadi Regional Internet Registries 24 From http://commons.wikimedia.org/wiki/File:Regional_Internet_Registries_world_map.svg https://en.wikipedia.org/wiki/List_of_assigned_/8_IPv4_address_blocks CPSC 317 – Computer Networking : IP Address Ranges Maryam R.Aliabadi So, why do we care about all this? • Real-life IP address assignments are “messy” • Regions / ISPs / Customers need more IP addresses over time as they grow 25CPSC 317 – Computer Networking : IP Address Ranges Maryam R.Aliabadi Autonomous Systems and Addresses 26 SFU AS11105 UVIC AS16462 U of Alberta AS3359 U of Calgary AS33091 Cybera inc AS15296 Canarie Inc AS6509 BCnet AS271 UBC AS393249 CPSC 317 – Computer Networking : IP Address Ranges Maryam R.Aliabadi Autonomous Systems and Addresses 27 SFU AS11105 UVIC AS16462 U of Alberta AS3359 U of Calgary AS33091 Cybera inc AS15296 Canarie Inc AS6509 BCnet AS271 UBC AS393249 134.87.128.0-134.87.191.255 142.104.0.0-142.104.255.255 206.12.48.0-206.12.48.255 206.12.50.0-206.12.50.255 206.12.59.0-206.12.59.255 206.12.96.0-206.12.103.255 206.12.154.0-206.12.154.255 206.87.80.0-206.87.95.255 206.87.160.0-206.87.191.255 CPSC 317 – Computer Networking : IP Address Ranges Maryam R.Aliabadi Autonomous Systems and Addresses 28 SFU AS11105 UVIC AS16462 U of Alberta AS3359 U of Calgary AS33091 Cybera inc AS15296 Canarie Inc AS6509 BCnet AS271 UBC AS393249 134.87.128.0-134.87.191.255 142.104.0.0-142.104.255.255 206.12.48.0-206.12.48.255 206.12.50.0-206.12.50.255 206.12.59.0-206.12.59.255 206.12.96.0-206.12.103.255 206.12.154.0-206.12.154.255 206.87.80.0-206.87.95.255 206.87.160.0-206.87.191.255 136.159.0.0-136.159.255.255 198.161.243.0-198.161.243.255 CPSC 317 – Computer Networking : IP Address Ranges Maryam R.Aliabadi Autonomous Systems and Addresses 29 SFU AS11105 UVIC AS16462 U of Alberta AS3359 U of Calgary AS33091 Cybera inc AS15296 Canarie Inc AS6509 BCnet AS271 UBC AS393249 134.87.128.0-134.87.191.255 142.104.0.0-142.104.255.255 206.12.48.0-206.12.48.255 206.12.50.0-206.12.50.255 206.12.59.0-206.12.59.255 206.12.96.0-206.12.103.255 206.12.154.0-206.12.154.255 206.87.80.0-206.87.95.255 206.87.160.0-206.87.191.255 136.159.0.0-136.159.255.255 198.161.243.0-198.161.243.255 128.189.16.0 - 128.189.23.255 128.189.136.0 - 128.189.143.255 128.189.144.0 - 128.189.151.255 128.189.152.0 - 128.189.159.255 128.189.160.0 - 128.189.167.255 128.189.168.0 - 128.189.175.255 128.189.176.0 - 128.189.183.255 128.189.184.0 - 128.189.191.255 128.189.24.0 - 128.189.31.255 128.189.64.0 - 128.189.71.255 128.189.72.0 - 128.189.79.255 128.189.80.0 - 128.189.87.255 128.189.88.0 - 128.189.95.255 128.189.128.0 - 128.189.135.255 128.189.192.0 - 128.189.199.255 128.189.200.0 - 128.189.207.255 128.189.208.0 - 128.189.215.255 128.189.216.0 - 128.189.223.255 128.189.224.0 - 128.189.231.255 128.189.232.0 - 128.189.239.255 128.189.240.0 - 128.189.247.255 128.189.248.0 - 128.189.255.255 206.12.40.0 - 206.12.47.255 206.12.64.0 - 206.12.71.255 206.12.136.0 - 206.12.143.255 206.12.160.0 - 206.12.167.255 206.12.192.0 - 206.12.199.255 206.87.112.0 - 206.87.119.255 206.87.120.0 - 206.87.127.255 206.87.128.0 - 206.87.135.255 206.87.152.0 - 206.87.159.255 206.87.208.0 - 206.87.215.255 206.87.216.0 - 206.87.223.255 206.87.232.0 - 206.87.239.255 142.231.64.0 - 142.231.67.255 142.231.68.0 - 142.231.71.255 142.231.72.0 - 142.231.75.255 142.231.76.0 - 142.231.79.255 142.231.80.0 - 142.231.83.255 142.231.84.0 - 142.231.87.255 142.231.88.0 - 142.231.91.255 142.231.92.0 - 142.231.95.255 128.189.96.0 - 128.189.127.252 137.82.0.0 - 137.82.255.255 142.103.0.0 - 142.103.255.255 198.162.32.0 - 198.162.63.255 206.12.72.0 - 206.12.75.255 206.12.118.0 - 206.12.118.255 206.12.208.0 - 206.12.211.255 206.87.200.0 - 206.87.207.255 206.87.224.0 - 206.87.231.255 207.23.94.0 - 207.23.95.255 142.231.64.0 - 142.231.95.255 206.87.0.1- 206.87.3.255 206.87.4.0 - 206.87.7.255 206.87.24.0 - 206.87.31.255 206.87.32.0 - 206.87.63.255 142.103.93.1- 142.103.93.252 142.103.165.1 - 142.103.165.251 206.12.32.0 - 206.12.39.255 206.12.52.0 - 206.12.55.255 206.87.96.0 - 206.87.103.255 206.87.104.0 - 206.87.111.255 CPSC 317 – Computer Networking : IP Address Ranges Maryam R.Aliabadi Address Range Aggregation • Ranges can be aggregated if, when combined: • All ranges being aggregated are covered • New range does not include groups not being aggregated • Useful for collapsing range information • Example: when advertising network ranges 31CPSC 317 – Computer Networking : IP Address Ranges Maryam R.Aliabadi Address Range Aggregation Example • Example: 192.205.0.0/22 and 192.205.4.0/22 10100000 11001101 000000XX XXXXXXXX 10100000 11001101 000001XX XXXXXXXX • Aggregated range: 192.205.0.0/21 10100000 11001101 00000XXX XXXXXXXX 32CPSC 317 – Computer Networking : IP Address Ranges Maryam R.Aliabadi Clicker question Consider these two CIDR networks: 192.205.4.0/22 and 192.205.8.0/22 A) These can be aggregated to 192.205.0.0/20 B) These can be aggregated to 192.205.4.0/21 C) These can be aggregated to 192.205.8.0/21 D) These cannot be aggregated 33CPSC 317 – Computer Networking : IP Address Ranges Maryam R.Aliabadi Clicker answer Consider these two CIDR networks: 192.205.4.0/22 and 192.205.8.0/22 10100000 11001101 000001XX XXXXXXXX 10100000 11001101 000010XX XXXXXXXX 34CPSC 317 – Computer Networking : IP Address Ranges Maryam R.Aliabadi Clicker answer Consider these two CIDR networks: 192.205.4.0/22 and 192.205.8.0/22 10100000 11001101 000001XX XXXXXXXX 10100000 11001101 000010XX XXXXXXXX 35CPSC 317 – Computer Networking : IP Address Ranges Maryam R.Aliabadi Clicker answer Consider these two CIDR networks: 192.205.4.0/22 and 192.205.8.0/22 10100000 11001101 000001XX XXXXXXXX 10100000 11001101 000010XX XXXXXXXX D) These cannot be aggregated to 192.205.4.0/20 because the following ranges are included in the aggregation but not in the original ranges. 10100000 11001101 000000XX XXXXXXXX 10100000 11001101 000011XX XXXXXXXX 36CPSC 317 – Computer Networking : IP Address Ranges Maryam R.Aliabadi Address Range Aggregation Example • Example: 192.205.0.0/22 and 192.205.2.0/23 10100000 11001101 000000XX XXXXXXXX 10100000 11001101 0000001X XXXXXXXX • First range includes all addresses in the second • Aggregated range: 192.205.0.0/22 (same as first) 10100000 11001101 000000XX XXXXXXXX 37CPSC 317 – Computer Networking : IP Address Ranges Maryam R.Aliabadi Autonomous Systems and Addresses 38 SFU AS11105 UVIC AS16462 U of Alberta AS3359 U of Calgary AS33091 Cybera inc AS15296 Canarie Inc AS6509 BCnet AS271 UBC AS393249 134.87.128.0/18 142.104.0.0/16 206.12.48.0/24 206.12.50.0/24 206.12.59.0/24 206.12.96.0/21 206.12.154.0/24 206.87.80.0/20 206.87.160.0/19 136.159.0.0/16 198.161.243.0/24 128.189.16.0/21 128.189.136.0/21 128.189.144.0/21 128.189.152.0/21 128.189.160.0/21 128.189.168.0/21 128.189.176.0/21 128.189.184.0/21 128.189.24.0/21 128.189.64.0/21 128.189.72.0/21 128.189.80.0/21 128.189.88.0/21 128.189.128.0/21 128.189.192.0/21 128.189.200.0/21 128.189.208.0/21 128.189.216.0/21 128.189.224.0/21 128.189.232.0/21 128.189.240.0/21 128.189.248.0/21 206.12.40.0/21 206.12.64.0/21 206.12.136.0/21 206.12.160.0/21 206.12.192.0/21 206.87.112.0/21 206.87.120.0/21 206.87.128.0/21 206.87.152.0/21 206.87.208.0/21 206.87.216.0/21 206.87.232.0/21 142.231.64.0/22 142.231.68.0/22 142.231.72.0/22 142.231.76.0/22 142.231.80.0/22 142.231.84.0/22 142.231.88.0/22 142.231.92.0/22 128.189.96.0/19 137.82.0.0/16 142.103.0.0/16 198.162.32.0/19 206.12.72.0/22 206.12.118.0/24 206.12.208.0/22 206.87.200.0/21 206.87.224.0/21 207.23.94.0/23 142.231.64.0/19 206.87.0.0/22 206.87.4.0/22 206.87.24.0 /21 206.87.32.0/19 142.103.93.0/24 142.103.165.0/24 206.12.32.0/21 206.12.52.0/22 206.87.96.0/21 206.87.104.0/21 128.189.16.0/20 128.189.64.0/18 128.189.128.0/17 137.82.0.0/16 142.103.0.0/16 142.231.64.0/19 198.162.32.0/19 206.12.32.0/20 206.12.52.0/22 206.12.64.0/21 206.12.72.0/22 206.12.118.0/24 206.12.136.0/21 206.12.160.0/21 206.12.192.0/21 206.12.208.0/22 206.87.0.0/21 206.87.24.0/32 206.87.32.0/19 206.87.96.0/19 206.87.128.0/21 206.87.152.0/21 206.87.200.0/21 206.87.208.0/20 206.87.224.0/20 207.23.94.0/23 CPSC 317 – Computer Networking : IP Address Ranges Maryam R.Aliabadi What happened here? 142.231.64.0/22 142.231.68.0/22 142.231.72.0/22 142.231.76.0/22 142.231.80.0/22 142.231.84.0/22 142.231.88.0/22 142.231.92.0/22 39CPSC 317 – Computer Networking : IP Address Ranges Maryam R.Aliabadi What happened here? 142.231.64.0/22 142.231.68.0/22 142.231.72.0/22 142.231.76.0/22 142.231.80.0/22 142.231.84.0/22 142.231.88.0/22 142.231.92.0/22 40 142.231.01000000.0/22 142.231.01000100.0/22 142.231.01001000.0/22 142.231.01001100.0/22 142.231.01010000.0/22 142.231.01010100.0/22 142.231.01011000.0/22 142.231.01011100.0/22 CPSC 317 – Computer Networking : IP Address Ranges Maryam R.Aliabadi What happened here? 142.231.64.0/22 142.231.68.0/22 142.231.72.0/22 142.231.76.0/22 142.231.80.0/22 142.231.84.0/22 142.231.88.0/22 142.231.92.0/22 41 142.231.64.0/19 142.231.01000000.0/22 142.231.01000100.0/22 142.231.01001000.0/22 142.231.01001100.0/22 142.231.01010000.0/22 142.231.01010100.0/22 142.231.01011000.0/22 142.231.01011100.0/22 CPSC 317 – Computer Networking : IP Address Ranges Maryam R.Aliabadi Address Range Division • How to divide an address range into two (or more) smaller ranges? • Why would we ever need to do this? • First consider dividing into 2 sub-ranges • Set the first unfixed bit as a fixed bit in the two sub-ranges • One range has that bit as 0, the other has that bit as 1 • Repeat if multiple ranges required 42CPSC 317 – Computer Networking : IP Address Ranges Maryam R.Aliabadi Address Range Division Example • Example: divide 198.162.0.0/16 into two ranges • Full range: 198.162.0.0 to 198.162.255.255 11000000 10101000 XXXXXXXX XXXXXXXX • 1st range: 198.162.0.0 to 198.162.127.255 → 198.162.0.0/17 11000000 10101000 0XXXXXXX XXXXXXXX • 2nd range: 198.162.128.0 to 198.162.255.255 → 198.162.128.0/17 11000000 10101000 1XXXXXXX XXXXXXXX 43CPSC 317 – Computer Networking : IP Address Ranges Maryam R.Aliabadi In-class activity • ICA53 • Address aggregation • Address splitting • Forwarding 44CPSC 317 – Computer Networking : IP Address Ranges Maryam R.Aliabadi Next Topic: Routing 45","libVersion":"0.2.1","langs":""}