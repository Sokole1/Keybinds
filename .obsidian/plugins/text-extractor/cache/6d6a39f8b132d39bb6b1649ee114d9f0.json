{"path":".obsidian/plugins/text-extractor/cache/6d6a39f8b132d39bb6b1649ee114d9f0.json","text":"CPSC 317 Computer Networking Transport Layer Congestion Control Maryam R.Aliabadi mraiyata@cs.ubc.ca 1CPSC 317 – Computer Networking : Transport Layer – Congestion Control Maryam R.Aliabadi Reading • Reading: 3.5.2, 3.5.4, 3.5.5 2CPSC 317 – Computer Networking : Transport Layer – Congestion Control Maryam R.Aliabadi Learning goals • Explain the concept of flow control, and how a sliding window protocol can implement it • Explain the concept of congestion control, and how a sliding window protocol can implement it • Describe and analyze strategies for controlling the sending window size with respect to congestion • Describe and analyze strategies for how the receiver can control how much data the sender can send before pausing and waiting for buffers to empty • Trace the sending of packets/ACKS and how sequence numbers are used in TCP • Trace how TCP sets up and terminate a connection 3CPSC 317 – Computer Networking : Transport Layer – Congestion Control Maryam R.Aliabadi Flow Control • Should we always send the full window size? • What if the receiving application is slow in accepting new data? • Packets will accumulate in the receiver’s buffer • Eventually buffer will be full, packets will be dropped • Immediately re-sending this data does not resolve the problem • Receiver will notify the sender how much data it can handle • This information is usually included in the ACK • Sender adjusts its window size based on this information • Why can’t the receiver just not ACK the extra data? 4CPSC 317 – Computer Networking : Transport Layer – Congestion Control Maryam R.Aliabadi Congestion Control • What if the network can’t handle a full window’s worth of data? • Packets and ACKs will be dropped by the routers • Missing ACKs are a sign that there is congestion somewhere (in either direction) • Sender can reduce sender window once congestion is detected • Example: if some number of ACKs are missing in a period of time • If all packets are ACKed, we can increase the window again 5CPSC 317 – Computer Networking : Transport Layer – Congestion Control Maryam R.Aliabadi Effect on Throughput • Throughput is affected by • Bandwidth of sender’s direct network connection • Receiver’s specified window size (flow control) • Sender’s adjusted window size (congestion control) • If sender’s direct connection is not the bottleneck: • Another router will experience congestion elsewhere • Congestion control will reduce transmission speed 6CPSC 317 – Computer Networking : Transport Layer – Congestion Control Maryam R.Aliabadi Recap • We’ve built reliable delivery on top of an unreliable network (lower- level protocol) • We realized we need more packets in flight, and introduced send windows • GBN vs SR • We’ve talked about flow control (a slow receiver) • We’ve talked about congestion control (a busy network) • Now we are going to see what a real protocol looks like 7CPSC 317 – Computer Networking : Transport Layer – Congestion Control Maryam R.Aliabadi TCP Overview 8 • point-to-point: • exactly two participants • connection-oriented: • handshaking (exchange of control msgs) initializes sender, receiver state before data exchange • full duplex data: • bi-directional data flow in same connection • (sometimes we may talk about data flow in only one direction) • send & receive buffers • reliable, in-order byte stream: • no “message boundaries” • MSS: maximum segment size • pipelined: • TCP congestion and flow control set window size • flow controlled: • sender will not overwhelm receiver socket door TCP send buffer TCP receive buffer socket door segment application writes data application reads data RFCs: 793, 1122, 1323, 2018, 2581 CPSC 317 – Computer Networking : Transport Layer – Congestion Control Maryam R.Aliabadi TCP is Bi-Directional, but … • It helps understanding if we talk about data flowing in just one direction at a time • But in fact, data flows in both directions over the same connection 9CPSC 317 – Computer Networking : Transport Layer – Congestion Control Maryam R.Aliabadi TCP Segment Format 10 • SYN – conn. start, synchronize seq# • FIN – conn. close, no new data from sender • RST – reset conn. (rejected connection) • ACK – indicate that ACK # is set • PSH – sender pushed the accumulated send buffer • URG – segment contains “urgent” data; combined with urgent data pointer, points to the data to be delivered before other data. • ECE – ECN-Echo, indicate ECN capability • CWR – congestion window reduced Source port # Destination port # Sequence Number Acknowledgement Number Hdr Len Not usedCWRECEURGACKPSHRSTSYNFINReceiver Window Checksum Urgent Data Pointer Options (optional, variable length) Application payload (optional, variable length) 32 bits For information only, you will not be tested on the format of the header CPSC 317 – Computer Networking : Transport Layer – Congestion Control Maryam R.Aliabadi TCP sequence numbers and ACKs • Each byte of a TCP segment has a sequence number • The sequence number of a segment is the sequence number of its first byte • ACKs correspond to the first sequence number not yet received (similar to Go-Back-N, but byte-based and +1) • Receiver stores packets in its own window (like Selective-Repeat) • ACKs are cumulative (like Go-Back-N) 11CPSC 317 – Computer Networking : Transport Layer – Congestion Control Maryam R.Aliabadi TCP seq. #’s and ACKs Seq. #’s: • byte stream “number” of first byte in segment’s data ACKs: • seq # of next byte expected from other side • cumulative ACK 12 Host A Host B User types ‘C’ host ACKs receipt of echoed ‘C’ host ACKs receipt of ‘C’, echoes back ‘C’ time simple telnet scenario CPSC 317 – Computer Networking : Transport Layer – Congestion Control Maryam R.Aliabadi TCP seq. #’s and ACKs CPSC 317 – Computer Networking : Transport Layer – Congestion Control Maryam R.Aliabadi TCP Window Management (I) • The receiver has a flow control window • Size is measured in bytes • Size is selected by the application (if not the default) 14CPSC 317 – Computer Networking : Transport Layer – Congestion Control Maryam R.Aliabadi TCP Window Management (II) • The sender has a congestion window • Size is measured in segments • Size is determined by the presence or absence of congestion • Actual send window is the minimum of the flow control window (advertised by the receiver) and the (scaled) congestion window (computed by the sender) 15CPSC 317 – Computer Networking : Transport Layer – Congestion Control Maryam R.Aliabadi In-class activity • ICA46 • TCP sequence and ack numbers 16CPSC 317 – Computer Networking : Transport Layer – Congestion Control Maryam R.Aliabadi Next Topic TCP 17","libVersion":"0.2.1","langs":""}