{"path":".obsidian/plugins/text-extractor/cache/dfefadb90764bc26af036f6bfb577dd2.json","text":"CPSC 3 1 3 To d a y • Lear ni ng O bj ec t i v es • De f i n e • F u l l y A sso ci a t i ve C a ch e • Se t - A sso ci a t i ve C a ch e • Ev a l u a t e t r a d e o f f s b e t w e e n d i f f e r e n t c a c h e o r g a n i z a t i o n s • Ho w we ’ l l g e t t h e r e • Mo t i v a t e c a c h e s t h a t a r e mo r e c o mp l e x t h a n d i r e c t ma p p e d • Sh o w w h a t i n f o r m a t i o n y o u n e e d t o h a v e a s e t - as s oc i at i v e c ac he • Re a d i n g • 6. 4 ( W e w i l l get t o w r i t e - ca ch i n g l a t e r . ) 1 Re c a l l : • In a d ir e c t m a p p e d c a c h e , ev e r y b i t o f d a t a h a s o n e a n d on l y on e p l a c e i t c a n b e i n t h e ca c h e . • Co n s i d e r t h e f o l l o w i n g : • Le t ’ s a s s ume w e ha v e a n 8 KB ca c h e w i t h a l i n e s i z e o f 6 4 by t e s . • As s u m e a l o n g i s 8 b y t e s • Co n si d e r t h e c o d e t o t h e ri g h t . CP S C 3 1 3 2 long a[1024]; long b[1024]; long c[1024]; for (int i = 0; i < 1024; i ++) { c[ i ] = a[ i ] + b[ i ]; } Ho w l a r g e i s e a c h a r r a y ? 8192 b y t e s As s u m i n g t h e y ar e al l o c a t e d c o n t i g u o u s l y , w h a t i s go i n g t o h a p p e n w h e n w e r u n th i s p r o g r a m ? Ev e r y s i n g l e a r r a y a c c e s s i s g o i n g t o c a u s e a mi s s ! The pr o bl em w i th a di r ec t m a pped c a c he • If a r r a y A s t a r t s a t a d d r e s s 0 x2 0 0 0 ; w h e r e d o e s a r r a y B s t a r t ? • 0x 4000 • Ar r a y C ? • 0x 6000 • Wh a t a r e t h e i m p l i c a t i o n s i n t h e c a c h e ? • If a d d r e sse s a r e 3 2 b i ts, h o w l a r g e a r e th e o f f se t, i n d e x , a n d t a g ? CP S C 3 1 3 3 Ta g = 1 9 In d e x = 7 b i t s (8 1 9 2 / 6 4 = 1 2 8 = 2 7 ) Of f s e t = 6 b i t s ( 2 6 = 6 4 ) 0x 2000 001 0 0000 00 00 000 0x 4000 010 0 0000 00 00 0000 0x 6000 011 0 0000 00 00 0000 a[ 0 ] , b [ 0 ] , c [ 0 ] The pr o bl em w i th a di r ec t m a pped c a c he • If a r r a y A s t a r t s a t a d d r e s s 0 x2 0 0 0 ; w h e r e d o e s a r r a y B s t a r t ? • 0x 4000 • Ar r a y C ? • 0x 6000 • Wh a t a r e t h e i m p l i c a t i o n s i n t h e c a c h e ? • If a d d r e sse s a r e 3 2 b i ts, h o w l a r g e a r e th e o f f se t, i n d e x , a n d t a g ? CP S C 3 1 3 4 Ta g = 1 9 In d e x = 7 b i t s (8 1 9 2 / 6 4 = 1 2 8 = 2 7 ) Of f s e t = 6 b i t s ( 2 6 = 6 4 ) 0x 2000 001 0 0000 00 00 1000 0x 4000 010 0 0000 00 00 1000 0x 6000 011 0 0000 00 00 1000 a[ 1 ] , b [ 1 ] , c [ 1 ] The pr o bl em w i th a di r ec t m a pped c a c he • If a r r a y A s t a r t s a t a d d r e s s 0 x2 0 0 0 ; w h e r e d o e s a r r a y B s t a r t ? • 0x 4000 • Ar r a y C ? • 0x 6000 • Wh a t a r e t h e i m p l i c a t i o n s i n t h e c a c h e ? • If a d d r e sse s a r e 3 2 b i ts, h o w l a r g e a r e th e o f f se t, i n d e x , a n d t a g ? CP S C 3 1 3 5 Ta g = 1 9 In d e x = 7 b i t s (8 1 9 2 / 6 4 = 1 2 8 = 2 7 ) Of f s e t = 6 b i t s ( 2 6 = 6 4 ) 0x 2000 001 0 0000 01 00 0000 0x 4000 010 0 0000 01 00 0000 0x 6000 011 0 0000 01 00 0000 a[ 8 ] , b [ 8 ] , c [ 8 ] The pr o bl em w i th a di r ec t m a pped c a c he • If a r r a y A s t a r t s a t a d d r e s s 0 x2 0 0 0 ; w h e r e d o e s a r r a y B s t a r t ? • 0x 4000 • Ar r a y C ? • 0x 6000 • Wh a t a r e t h e i m p l i c a t i o n s i n t h e c a c h e ? • If a d d r e sse s a r e 3 2 b i ts, h o w l a r g e a r e th e o f f se t, i n d e x , a n d t a g ? CP S C 3 1 3 6 Ta g = 1 9 In d e x = 7 b i t s (8 1 9 2 / 6 4 = 1 2 8 = 2 7 ) Of f s e t = 6 b i t s ( 2 6 = 6 4 ) 0x 2000 001 1 1111 11 11 1000 0x 4000 010 1 1111 11 11 1000 0x 6000 011 1 11 11 1111 1 000 a[ 1 0 2 3 ] , b [ 1 0 2 3 ] , c [ 1 0 2 3 ] Cou n t i n g m i s s e s : CP S C 3 1 3 7 long a[1024]; long b[1024]; long c[1024]; for (int i = 0; i < 1024; i ++) { c[ i ] = a[ i ] + b[ i ]; } Re a d t h i s Re a d t h i s Ev i c t t h a t Wr i t e t h i s Ev i c t t h a t Ho w d o w e f i x t h i s ? Ca c h e A r r a n g e m e n t : F u l l y A s s oc i a t i v e CP S C 3 1 3 8 Ea c h b o x i s a s l o t A c ac h e l i n e c an g o AN Y slo t ! B[ 0 - 7] A[ 8 - 15] A[ 0 - 7] B[ 8 - 15] C[ 0 - 7] Ca c h e A r r a n g e m e n t : 2 - wa y s e t a s s o c i a t i v e CP S C 3 1 3 9 A s l o t h o l d s a c ac h e l i n e A c ac h e l i n e c an g o i n on e of t w o s l ot s ! A[ 0 - 7] B[ 0 - 7] C[ 0 - 7] Se t A s s o ci a t i v i t y : E v i ct i o n P o l i cy CP S C 3 1 3 10 A s l o t h o l d s a c ac h e l i n e A c ac h e l i n e c an g o i n on e of t w o s l ot s ! A[ 0 - 7] B[ 0 - 7] C[ 0 - 7] Se t A s s o ci a t i v i t y : 4 - wa y s e t a s s o c i a t i v e CP S C 3 1 3 11 A s l o t h o l d s a c ac h e l i n e A c ac h e l i n e c an g o i n on e of f ou r s l ot s ! A[ 0 - 7] B[ 0 - 7] C[ 0 - 7] As s o c i a t i v i t y a n d M a p p i n g Ad d r e s s e s t o Ca c h e L i n e s • Le t ’ s c o n t i n u e t o as s u m e an 8 KB c ac h e w i t h 6 4 b i t c ac h e l i n e s an d lo o k a t w h a t h a p p e n s t o h o w w e p ic k in d e x b it s d e p e n d in g o n s e t as s o c i a t i vi t y . • Di r e c t m a p p e d c a c h e : • Wh y ? • 8192 b y t e s / 64 b y t e s - pe r - l i ne = 1 2 8 l i ne s = > w e ne e d 7 bi t s t o pi c k a l i ne CP S C 3 1 3 12 Ta g = 1 9 In d e x = 7 b i t s (8 1 9 2 / 6 4 = 1 2 8 = 2 7 ) Of f s e t = 6 b i t s ( 2 6 = 6 4 ) As s o c i a t i v i t y a n d M a p p i n g Ad d r e s s e s t o Ca c h e L i n e s • Le t ’ s c o n t i n u e t o as s u m e an 8 KB c ac h e w i t h 64 by t e ca c h e l i n e s a n d lo o k a t w h a t h a p p e n s t o h o w w e p ic k in d e x b it s d e p e n d in g o n s e t as s o c i a t i vi t y . • Wh a t h a p p e n s w h e n w e ma k e t h i s 2 - wa y s et a s s o c i a t i v e ? • Our c a c he i s s t i l l l a r g e e no ug h t o ho l d 1 2 8 l i ne s , but • e a c h l i ne c a n g o i n t w o pl a c e s • t he a ddr e s s ha s o nl y ha l f a s m a n y pl a c e s f r o m w hi c h t o c ho o s e ( be c a us e e a c h ‘pl a c e ’ ho l ds t w o c a c he l i ne s ) . • S o , w he n w e I N C R E A S E a s s o c i a t i v i t y , w e D E C R E A S E t he num be r o f i nde x bi t s a nd I N C R E A S E t he num be r o f t a g bi t s . CP S C 3 1 3 13 Ta g = ? bi t s In d e x = ? bi t s Of f s e t = 6 b i t s ( 2 6 = 6 4 ) 6 b i t s 20 b i t s","libVersion":"0.2.1","langs":""}